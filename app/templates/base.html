<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}E-Learning Platform{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'dark-green': '#1B4D3E',
                        'lime': '#84CC16',
                        'light-gray': '#F9FAFB',
                        'border-gray': '#E5E7EB'
                    }
                }
            }
        }
    </script>
    <style>
        /* Simple reveal animation for elements */
        .reveal { opacity: 0; transform: translateY(12px); transition: opacity 560ms ease, transform 560ms ease; }
        .reveal.visible { opacity: 1; transform: translateY(0); }

        /* Subtle SVG float */
        .svg-float { transform-origin: center; animation: float 6s ease-in-out infinite; }
        @keyframes float { 0% { transform: translateY(0); } 50% { transform: translateY(-6px); } 100% { transform: translateY(0); } }
        
        /* CTA button styles (green) and animation */
        .btn-cta { background-color: #2f855a; color: white; }
        .btn-cta:hover { background-color: #276749; }
        .btn-animate { animation: btn-move 4s ease-in-out infinite; }
        @keyframes btn-move { 0% { transform: translateY(0); } 50% { transform: translateY(-4px); } 100% { transform: translateY(0); } }

        /* Hover and color animation for cards */
        .card-hover { transition: transform 220ms ease, background-color 220ms ease, box-shadow 220ms ease; }
        .card-hover:hover { transform: translateY(-6px) scale(1.02); background-color: #f0fff4; box-shadow: 0 8px 30px rgba(16, 185, 129, 0.08); }

        /* Button gentle pulse on hover */
        .btn-pulse { transition: box-shadow 220ms ease; }
        .btn-pulse:hover { box-shadow: 0 8px 24px rgba(34,197,94,0.18); }

        /* Form card styling for CRUD pages */
        .form-card { background: white; border-radius: .5rem; padding: 1.25rem; box-shadow: 0 6px 18px rgba(15,23,42,0.06); }
        /* Flash message fade/close */
        .flash { opacity: 1; transition: opacity 300ms ease, transform 300ms ease; }
        .flash.hide { opacity: 0; transform: translateY(-6px); pointer-events: none; }
    </style>
</head>
<body class="bg-light-gray">
    <!-- Navigation -->
    <nav class="bg-white shadow-sm border-b border-border-gray sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <a href="/" class="text-2xl font-bold text-dark-green">ELearning</a>
                </div>
                <div class="flex items-center gap-4">
                    {% if current_user.is_authenticated %}
                        <span class="text-sm text-gray-600">{{ current_user.full_name }}</span>
                        <span class="text-xs bg-lime text-dark-green px-2 py-1 rounded">{{ current_user.role.upper() }}</span>
                        <a href="{{ url_for('auth.logout') }}" class="text-sm text-dark-green hover:text-lime transition">Logout</a>
                    {% else %}
                        <a href="{{ url_for('auth.login') }}" class="text-sm text-dark-green hover:text-lime transition">Login</a>
                        <a href="{{ url_for('auth.register') }}" class="text-sm bg-dark-green text-white px-4 py-2 rounded hover:bg-lime hover:text-dark-green transition">Register</a>
                    {% endif %}
                </div>
            </div>
        </div>
    </nav>

    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-4">
                    {% set emoji = 'üôè' if category == 'success' else '‚ö†Ô∏è' if category == 'danger' else '‚ÑπÔ∏è' %}
                    {# auto-close info flashes (e.g. logout) after 3000ms #}
                    {% set autoclose = 'data-autoclose="3000"' if category == 'info' else '' %}
                    <div class="alert alert-{{ category }} bg-{{ 'green' if category == 'success' else 'red' if category == 'danger' else 'blue' if category == 'info' else 'yellow' }}-50 border border-{{ 'green' if category == 'success' else 'red' if category == 'danger' else 'blue' if category == 'info' else 'yellow' }}-200 text-{{ 'green' if category == 'success' else 'red' if category == 'danger' else 'blue' if category == 'info' else 'yellow' }}-700 px-4 py-3 rounded flex items-start gap-3 flash" {{ autoclose }}>
                        <div class="text-2xl">{{ emoji }}</div>
                        <div>
                            <div class="text-sm">{{ message }}</div>
                        </div>
                        <button type="button" class="ml-auto text-sm text-gray-500 hover:text-gray-700 close-flash">‚úï</button>
                    </div>
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="bg-dark-green text-white mt-16 py-8">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-lg font-semibold mb-4">E-Learning Platform</h3>
                    <p class="text-gray-300">Platform pembelajaran online modern untuk semua kalangan.</p>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4">Quick Links</h4>
                    <ul class="space-y-2 text-gray-300">
                        <li><a href="/" class="hover:text-lime transition">Home</a></li>
                        <li><a href="/about" class="hover:text-lime transition">About</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="text-lg font-semibold mb-4">Contact</h4>
                    <p class="text-gray-300">Email: info@elearning.com</p>
                    <p class="text-gray-300">Phone: +62 123 4567 8900</p>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
                <p>&copy; 2025 E-Learning Platform. All rights reserved.</p>
            </div>
        </div>
    </footer>
    <script>
        // Simple scroll reveal using IntersectionObserver
        (function(){
            const revealEls = document.querySelectorAll('[data-reveal]');
            if (!('IntersectionObserver' in window)) {
                // fallback: show all
                revealEls.forEach(el => el.classList.add('visible'));
                return;
            }

            const io = new IntersectionObserver((entries)=>{
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                        io.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.12 });

            revealEls.forEach(el => {
                el.classList.add('reveal');
                io.observe(el);
            });
        })();

        // Flash auto-close + close button
        (function(){
            // close button handler
            document.querySelectorAll('.close-flash').forEach(btn=>{
                btn.addEventListener('click', ()=>{
                    const parent = btn.closest('.flash');
                    if (!parent) return;
                    parent.classList.add('hide');
                    setTimeout(()=> parent.remove(), 320);
                });
            });

            // auto-close flashes with data-autoclose (milliseconds)
            document.querySelectorAll('.flash[data-autoclose]').forEach(el=>{
                const ms = parseInt(el.getAttribute('data-autoclose'),10) || 3000;
                setTimeout(()=>{
                    el.classList.add('hide');
                    setTimeout(()=> el.remove(), 320);
                }, ms);
            });
        })();
    </script>
</body>
</html>
